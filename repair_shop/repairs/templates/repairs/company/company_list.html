{% extends 'repairs/base.html'%}
{% load custom_tags %}

{% block title%} Companies {% endblock %}

{% block body %}
    {% for message in messages %}
    <h2>{{message}}</h2>
    {% endfor %}
    <div class="toolbar">
        <a href="{% url 'repairs:addcompany'%}" class="btn-primary"> Add company</a>
        <input
        type="search"
        id="search_company"
        name="search_company"
        class="searchbar"
        placeholder="Search companies..."
        hx-get="{% url 'repairs:search_companies' %}"
        hx-trigger="input  delay:300ms"
        hx-target="#companytable"
        hx-swap="innerHTML"
        />
    </div>
<table class="inventory-table" id="companytable" >
    <thead>
        <tr>
            {% for field in form %}
                <th>{{ field.label }}</th>
            {% endfor %}
                <th></th>
        </tr>
    </thead>
    <tbody >
        {% for company in list %}
        <tr class="{% cycle 'odd-row' 'even-row' %} " id="component-{{ item.id }}">
                {% for field in form %}
                    <td>{{ company|getattribute:field.name }}</td>
                {% endfor %}
                <td><a href='{% url "repairs:company_detail" company.pk %}' class="btn-primary">View</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}